<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kh.cocoa.dao.DocumentDAO">
	<!-- 문서리스트 출력 5가지(임시저장, 상인, 승인, 반려, 회수 -->
	<select id="getTemporaryList" resultType="kh.cocoa.dto.DocumentDTO">
		SELECT D.*, T.NAME "temp_name" FROM DOCUMENT D, TEMPLATES T
			WHERE D.TEMP_CODE = T.CODE
				AND D.STATUS='TEMP'
				AND D.WRITER_CODE='1004'
	</select>
	<select id="getSearchTemporaryList" resultType="kh.cocoa.dto.DocumentDTO">
		SELECT D.*, T.NAME "temp_name" FROM DOCUMENT D, TEMPLATES T
		WHERE D.TEMP_CODE = T.CODE
			AND D.STATUS='TEMP'
            AND D.WRITER_CODE='1004'
            AND D.WRITE_DATE BETWEEN #{startDate} AND #{endDate}
            AND D.TEMP_CODE IN (1,2,3)
            AND TITLE LIKE '%t%'
	</select>

	<select id="getRaiseList" resultType="kh.cocoa.dto.DocumentDTO">
		SELECT TEMPLATES.NAME "temp_name", DOCUMENT.*, E.NAME "emp_name", DEPARTMENTS.NAME "department_name" FROM DOC_CONFIRM D_CONFIRM, EMPLOYEE E, DOCUMENT, DEPARTMENTS, TEMPLATES
   			WHERE D_CONFIRM.APPROVER_CODE = E.CODE
		        AND DOCUMENT.WRITER_CODE='1004'
		        AND D_CONFIRM.DOC_SEQ=DOCUMENT.SEQ
		        AND DEPARTMENTS.CODE=E.DEPT_CODE
		        AND DOCUMENT.TEMP_CODE=TEMPLATES.CODE
		        AND DOCUMENT.STATUS='RAISE'
	</select>
	
	<select id="getApprovalList" resultType="kh.cocoa.dto.DocumentDTO">
		SELECT D.*, T.NAME "temp_name" FROM DOCUMENT D, TEMPLATES T
			WHERE D.TEMP_CODE = T.CODE
				AND D.STATUS='CONFIRM'
				AND D.WRITER_CODE='1004'
	</select>
	
	<select id="getRejectList" resultType="kh.cocoa.dto.DocumentDTO">
		SELECT D.*, T.NAME "temp_name" FROM DOCUMENT D, TEMPLATES T
			WHERE D.TEMP_CODE = T.CODE
				AND D.STATUS='REJECT'
				AND D.WRITER_CODE='1004'
	</select>
	
	<select id="getReturnList" resultType="kh.cocoa.dto.DocumentDTO">
		SELECT D.*, T.NAME "temp_name" FROM DOCUMENT D, TEMPLATES T
			WHERE D.TEMP_CODE = T.CODE
				AND D.STATUS='RETURN'
				AND D.WRITER_CODE='1004'
	</select>
	
	
</mapper>